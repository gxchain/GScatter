<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>gscatter测试页面</title>
    <script src="./scatterjs-core.min.js"></script>
</head>
<body>

<button onclick="login()">Login</button>
<button onclick="logout()">Logout</button>
<button onclick="transfer()">Transfer</button>
<button onclick="contract()">Contract</button>
<button onclick="generateKey()">Generate Key</button>
<button onclick="queryAccount()">Query Account By Name</button>

<script>
    const network = {
    blockchain:'gxc',
    protocol:'https',
    host:'testnet.gxchain.org',
    port:443,
    chainId:'c2af30ef9340ff81fd61654295e98a1ff04b23189748f86727d0b26b40bb0ff4'
}

    let scatter, gxc;

    ScatterJS.scatter.connect('exampleApp').then(connected => {
        if(!connected) return false;
        scatter = ScatterJS.scatter;
        // when user not login, you could use api which not need identity, like generateKey
        gxc = scatter.gxc(network);
    });

    window.login = async () => {
        await scatter.suggestNetwork(network);
        await scatter.getIdentity({accounts:[network]})
        const account = scatter.identity.accounts.find(x => x.blockchain === 'gxc');
        gxc = scatter.gxc(network,account);
    };

    window.logout = () => {
        scatter.forgetIdentity();
    };

    window.transfer = async () => {
        gxc.transfer('youxiu123','memo info', '1 GXC' ,true).then(trx => {
            console.log(`succcccc`,trx);
        }).catch(error => {
            console.error(error);
        });
    };

    window.contract = () => {
        gxc.callContract('lzydododo','hi', {user:'lzy'} ,0 ,true).then(trx => {
            console.log(`succcccc`,trx);
        }).catch(error => {
            console.error(error);
        });
    }

    window.generateKey = async () => {
        const key = await gxc.generateKey()
        console.log(key)
    }

    window.queryAccount = async () => {
        const account = await gxc.getAccount('lzydophin94')
        console.log(account)
    }
</script>
</body>
</html>